<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Театр историй</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Шапка -->
    <header class="new-header">
        <div class="header-container">
            <h1 class="header-title">ТЕАТР ИСТОРИЙ</h1>
        </div>
    </header>

    <!-- Слайды и видео -->
    <div class="slides-container" id="slidesContainer">
        <div class="slide-wrapper">
            <!-- Слайды 1-5 -->
            <div class="slide-item" data-slide="1">
                <img src="Images/img1.png" alt="Слайд 1">
            </div>
            <div class="slide-item" data-slide="2">
                <img src="Images/img2.png" alt="Слайд 2">
            </div>
            <div class="slide-item" data-slide="3">
                <img src="Images/img3.png" alt="Слайд 3">
            </div>
            <div class="slide-item" data-slide="4">
                <img src="Images/img4.png" alt="Слайд 4">
            </div>
            <div class="slide-item" data-slide="5">
                <img src="Images/img5.png" alt="Слайд 5">
            </div>
            
            <!-- Первое видео -->
            <div class="video-item" data-video="1">
                <video src="video1.mp4" controls preload="none"></video>
            </div>
            
            <!-- Слайды 6-11 -->
            <div class="slide-item" data-slide="6">
                <img src="Images/img6.png" alt="Слайд 6">
            </div>
            <div class="slide-item" data-slide="7">
                <img src="Images/img7.png" alt="Слайд 7">
            </div>
            <div class="slide-item" data-slide="8">
                <img src="Images/img8.png" alt="Слайд 8">
            </div>
            <div class="slide-item" data-slide="9">
                <img src="Images/img9.png" alt="Слайд 9">
            </div>
            <div class="slide-item" data-slide="10">
                <img src="Images/img10.png" alt="Слайд 10">
            </div>
            <div class="slide-item" data-slide="11">
                <img src="Images/img11.png" alt="Слайд 11">
            </div>
            
            <!-- Второе видео -->
            <div class="video-item" data-video="2">
                <video src="video2.mp4" controls preload="none"></video>
            </div>
            
            <!-- Третье видео -->
            <div class="video-item" data-video="3">
                <video src="video3.mp4" controls preload="none"></video>
            </div>
        </div>
    </div>

    <!-- Кнопка внизу -->
    <div class="bottom-button">
        <div class="button-container">
            <button class="main-button" onclick="contactMe()">
                <span class="button-text">Купить билет</span>
            </button>
        </div>
    </div>

    <script>
        function contactMe() {
            alert('Спасибо за интерес! Свяжитесь со мной по телефону или email.');
        }

        // Анимация при прокрутке и автоплей видео
        document.addEventListener('DOMContentLoaded', function() {
            const slidesContainer = document.getElementById('slidesContainer');
            const items = document.querySelectorAll('.slide-item, .video-item');
            const videos = document.querySelectorAll('.video-item video');
            
            function checkAnimation() {
                const containerRect = slidesContainer.getBoundingClientRect();
                const scrollTop = slidesContainer.scrollTop;
                const containerHeight = slidesContainer.clientHeight;
                
                items.forEach(item => {
                    const itemRect = item.getBoundingClientRect();
                    const itemTop = itemRect.top - containerRect.top + scrollTop;
                    const itemBottom = itemTop + item.offsetHeight;
                    
                    // Анимация появления
                    if (itemTop < scrollTop + containerHeight * 0.8 && 
                        itemBottom > scrollTop) {
                        item.classList.add('animate');
                    }
                });
            }
            
            // Автоплей видео при попадании в зону видимости
            function checkVideoPlayback() {
                const containerRect = slidesContainer.getBoundingClientRect();
                const scrollTop = slidesContainer.scrollTop;
                const containerHeight = slidesContainer.clientHeight;
                
                videos.forEach(video => {
                    const videoRect = video.getBoundingClientRect();
                    const videoTop = videoRect.top - containerRect.top + scrollTop;
                    const videoBottom = videoTop + video.offsetHeight;
                    const videoMiddle = videoTop + video.offsetHeight / 2;
                    
                    // Если видео в зоне видимости
                    if (videoTop < scrollTop + containerHeight && 
                        videoBottom > scrollTop) {
                        // Проверяем, не играет ли уже
                        if (video.paused && !video.classList.contains('played')) {
                            video.play().catch(e => console.log('Автоплей заблокирован:', e));
                            video.classList.add('played');
                        }
                    }
                });
            }
            
            // Объединяем функции
            function handleScroll() {
                checkAnimation();
                checkVideoPlayback();
            }
            
            slidesContainer.addEventListener('scroll', handleScroll);
            setTimeout(handleScroll, 100);
            
            // Анимируем первый элемент
            if (items.length > 0) {
                setTimeout(() => {
                    items[0].classList.add('animate');
                }, 300);
            }
        });
    </script>
</body>
</html>
